<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>fluid-music - v0.9.2-0</title>
	<meta name="description" content="Documentation for fluid-music - v0.9.2-0">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<script async src="assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">fluid-music - v0.9.2-0</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<h1>Project fluid-music - v0.9.2-0</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#fluid-music" id="fluid-music" style="color: inherit; text-decoration: none;">
					<h1>fluid-music</h1>
				</a>
				<a href="#fluid-music-tablature" id="fluid-music-tablature" style="color: inherit; text-decoration: none;">
					<h2>Fluid Music Tablature</h2>
				</a>
				<p>Fluid music comes with a simple but powerful music notation system built on JSON style objects.</p>
				<p>JavaScript objects containing strings, arrays, and numbers represent musical sequences like melodies, rhythmic patterns, and chord progressions.</p>
				<pre><code class="language-javascript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">fluid</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;fluid-music&#039;</span><span style="color: #000000">);</span>

<span style="color: #008000">// Define a rhythm.</span>
<span style="color: #008000">// The sixteen characters in the `r` string represent one measure of 16th notes</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">r</span><span style="color: #000000">   = </span><span style="color: #A31515">&#039;1 + 2 + 3 + 4 + &#039;</span><span style="color: #000000">; </span><span style="color: #008000">// main rhythm</span>

<span style="color: #008000">// Define some simple beat patterns that use the rhythm string above</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">h</span><span style="color: #000000">   = </span><span style="color: #A31515">&#039;  h   h   h   h &#039;</span><span style="color: #000000">; </span><span style="color: #008000">// hi-hat only</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">ks0</span><span style="color: #000000"> = </span><span style="color: #A31515">&#039;k . s . . . s k &#039;</span><span style="color: #000000">; </span><span style="color: #008000">// kick/snare patterns</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">ks1</span><span style="color: #000000"> = </span><span style="color: #A31515">&#039;k . s . . .k. k &#039;</span><span style="color: #000000">;</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">ks2</span><span style="color: #000000"> = </span><span style="color: #A31515">&#039;k . sk. . . . k &#039;</span><span style="color: #000000">;</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">ks3</span><span style="color: #000000"> = </span><span style="color: #A31515">&#039;k . s . . . . . &#039;</span><span style="color: #000000">;</span>

<span style="color: #008000">// Define a mapping of single character strings to MIDI notes.</span>
<span style="color: #008000">// This maps the characters in the beat strings above to midi notes.</span>
<span style="color: #008000">// General MIDI Percussion map: 36=bass-drum, 38=snare, 49=crash</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">nLibrary</span><span style="color: #000000"> = { </span><span style="color: #001080">k:</span><span style="color: #000000"> </span><span style="color: #098658">36</span><span style="color: #000000">, </span><span style="color: #001080">h:</span><span style="color: #000000"> </span><span style="color: #098658">42</span><span style="color: #000000">, </span><span style="color: #001080">s:</span><span style="color: #000000"> </span><span style="color: #098658">38</span><span style="color: #000000">, </span><span style="color: #001080">S:</span><span style="color: #000000"> </span><span style="color: #098658">40</span><span style="color: #000000">, </span><span style="color: #001080">c:</span><span style="color: #000000"> </span><span style="color: #098658">49</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;ðŸ”¥&#039;</span><span style="color: #001080">:</span><span style="color: #000000"> [</span><span style="color: #098658">36</span><span style="color: #000000">, </span><span style="color: #098658">49</span><span style="color: #000000">] };</span>

<span style="color: #008000">// Parse a *rhythm*, *pattern*, and *nLibrary* to create an array of *Note Objects*.</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">hhNotes</span><span style="color: #000000"> = </span><span style="color: #001080">fluid</span><span style="color: #000000">.</span><span style="color: #001080">tab</span><span style="color: #000000">.</span><span style="color: #795E26">parseTab</span><span style="color: #000000">(</span><span style="color: #001080">r</span><span style="color: #000000">, </span><span style="color: #001080">h</span><span style="color: #000000">,   </span><span style="color: #001080">nLibrary</span><span style="color: #000000">);</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">ksNotes</span><span style="color: #000000"> = </span><span style="color: #001080">fluid</span><span style="color: #000000">.</span><span style="color: #001080">tab</span><span style="color: #000000">.</span><span style="color: #795E26">parseTab</span><span style="color: #000000">(</span><span style="color: #001080">r</span><span style="color: #000000">, </span><span style="color: #001080">ks0</span><span style="color: #000000">, </span><span style="color: #001080">nLibrary</span><span style="color: #000000">);</span>
</code></pre>
				<p>The power of the tablature system comes from <code>FluidSession.insertScore(...)</code> which processes deeply nested JavaScript objects containing complex combinations and sequences of <strong>pattern</strong>, <strong>rhythm</strong>, and <strong>nLibrary</strong> objects.</p>
				<pre><code class="language-JavaScript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">p0</span><span style="color: #000000"> = { </span><span style="color: #001080">h</span><span style="color: #000000">, </span><span style="color: #001080">ks0</span><span style="color: #000000"> }; </span><span style="color: #008000">// kick/snare/hat patterns</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">p1</span><span style="color: #000000"> = { </span><span style="color: #001080">h</span><span style="color: #000000">, </span><span style="color: #001080">ks1</span><span style="color: #000000"> };</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">p2</span><span style="color: #000000"> = { </span><span style="color: #001080">h</span><span style="color: #000000">, </span><span style="color: #001080">ks2</span><span style="color: #000000"> };</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">p3</span><span style="color: #000000"> = { </span><span style="color: #001080">h</span><span style="color: #000000">, </span><span style="color: #001080">ks3</span><span style="color: #000000"> };</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">cr</span><span style="color: #000000"> = { </span><span style="color: #001080">r:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;h&#039;</span><span style="color: #000000">, </span><span style="color: #001080">p:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;ðŸ”¥&#039;</span><span style="color: #000000">};  </span><span style="color: #008000">// kick/crash on down beat (&#039;h&#039; rhythm is a half note)</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">notes</span><span style="color: #000000"> = </span><span style="color: #001080">fluid</span><span style="color: #000000">.</span><span style="color: #001080">tab</span><span style="color: #000000">.</span><span style="color: #795E26">parse</span><span style="color: #000000">({</span>
<span style="color: #000000">  </span><span style="color: #001080">nLibrary</span><span style="color: #000000">, </span><span style="color: #001080">r</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #001080">p:</span><span style="color: #000000"> [            </span><span style="color: #008000">// Use Arrays to create sequences</span>
<span style="color: #000000">    {</span><span style="color: #001080">p0</span><span style="color: #000000">, </span><span style="color: #001080">cr</span><span style="color: #000000">}, </span><span style="color: #001080">p0</span><span style="color: #000000">, </span><span style="color: #008000">// Use Objects to create layers</span>
<span style="color: #000000">    </span><span style="color: #001080">p1</span><span style="color: #000000">, </span><span style="color: #001080">p1</span><span style="color: #000000">,</span>
<span style="color: #000000">    </span><span style="color: #001080">p2</span><span style="color: #000000">, </span><span style="color: #001080">p2</span><span style="color: #000000">,</span>
<span style="color: #000000">    </span><span style="color: #001080">p3</span><span style="color: #000000">, </span><span style="color: #001080">p3</span><span style="color: #000000">,</span>
<span style="color: #000000">    { </span><span style="color: #001080">r:</span><span style="color: #A31515">&#039;1234..&#039;</span><span style="color: #000000">, </span><span style="color: #001080">p:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;...sss&#039;</span><span style="color: #000000">,   </span><span style="color: #001080">b:</span><span style="color: #000000"> { </span><span style="color: #001080">r</span><span style="color: #000000">, </span><span style="color: #001080">h:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;h h h h h h h . &#039;</span><span style="color: #000000">, </span><span style="color: #001080">ks3</span><span style="color: #000000"> } }, </span><span style="color: #008000">// triplet snare on beat 4</span>
<span style="color: #000000">    { </span><span style="color: #001080">r:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;h3e+a4e+a&#039;</span><span style="color: #000000">, </span><span style="color: #001080">p:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;...ssssss&#039;</span><span style="color: #000000">, </span><span style="color: #001080">cr</span><span style="color: #000000"> }, </span><span style="color: #008000">// drum roll of six 16th notes</span>
<span style="color: #000000">  ],</span>

<span style="color: #008000">// Create a midi in the currently active edit</span>
<span style="color: #000000">client.send(</span><span style="color: #001080">[</span>
<span style="color: #001080">  </span><span style="color: #008000">// select &#039;drums&#039; track, creating it if necessary</span>
<span style="color: #001080">  fluid.audiotrack.</span><span style="color: #795E26">select</span><span style="color: #001080">(</span><span style="color: #A31515">&#039;drums&#039;</span><span style="color: #001080">),</span>
<span style="color: #001080">  </span><span style="color: #008000">// create a midi clip named &#039;dp1&#039; 16 quarter notes long.</span>
<span style="color: #001080">  </span><span style="color: #008000">// Insert the clip at the beginning of the selected track.</span>
<span style="color: #001080">  fluid.midiclip.</span><span style="color: #795E26">create</span><span style="color: #001080">(</span><span style="color: #A31515">&#039;dp1&#039;</span><span style="color: #001080">, </span><span style="color: #098658">0</span><span style="color: #001080">, </span><span style="color: #098658">16</span><span style="color: #001080">, notes),</span>
<span style="color: #001080">});</span>
</code></pre>
				<p>For details, see the the <a href="./test/test-tab.js">tests</a> and the <code>fluid.tab</code> data types below:</p>
				<a href="#rhythm-strings" id="rhythm-strings" style="color: inherit; text-decoration: none;">
					<h3>Rhythm Strings</h3>
				</a>
				<p>Rhythm strings encode a sequence of durations. Examples:</p>
				<ul>
					<li><code>&#39;1234&#39;</code> has four characters, and represents a sequence of four quarter notes</li>
					<li><code>&#39;w&#39;</code> is one character, and represents a single <code>w</code>hole note</li>
					<li><code>&#39;hh&#39;</code> has two characters, and represents a sequency of two <code>h</code>alf notes</li>
					<li><code>&#39;h h &#39;</code> represents a sequence of four quarter notes (spaces may subdivide beats)</li>
					<li><code>&#39;h.h.&#39;</code> is equivalent to <code>&#39;h h &#39;</code> (dots may subdivide beats)</li>
					<li><code>&#39;1..2..&#39;</code> has 6 characters, and represents six eighth-note triplets</li>
					<li><code>&#39;1+2+3+4+&#39;</code> is eight characters, and represents eight consecutive 8th notes</li>
					<li><code>&#39;1 2 3 4 &#39;</code>is identical to <code>&#39;1+2+3+4+&#39;</code></li>
					<li><code>&#39;1 + 2 + &#39;</code> is eight characters and represents eight consecutive 16th notes</li>
					<li><code>&#39;1e+a2e+a&#39;</code> is identical to <code>&#39;1 + 2 + &#39;</code></li>
					<li><code>&#39;1....&#39;</code> represents five quintuplets (any number of subdivision are possible)</li>
					<li><code>&#39;h34&#39;</code> represents a half note and two quarter notes. <code>&#39;h&#39;</code> always represents a half note, and <code>&#39;w&#39;</code> always represents a whole note. Notice that this works a little differently than quarter notes: the duration of a <code>&#39;1&#39;</code> symbol may be diminished by a character that follows it (<code>&#39;1+&#39;</code> represents two eighth notes, not a quarter <em>and</em> an eighth note). While <code>&#39;w&#39;</code> and <code>&#39;h&#39;</code> my be divided into subdivisions like any other value (<code>&#39;w...&#39;</code>), the total duration incurred by <code>&#39;w&#39;</code> and <code>&#39;h&#39;</code> is never affected by subsequent characters.</li>
				</ul>
				<a href="#advances" id="advances" style="color: inherit; text-decoration: none;">
					<h3>Advances</h3>
				</a>
				<p><code>advances</code> is an array of numbers, with each element representing a single character in a <code>rhythm</code> string. It an intermediary form used internally. Consumers probably want to use <code>deltas</code> instead.</p>
				<ul>
					<li><code>[.5, 0, .5, .0]</code> is an <code>advances</code> array derived from <code>&#39;h h &#39;</code></li>
				</ul>
				<a href="#deltas" id="deltas" style="color: inherit; text-decoration: none;">
					<h3>Deltas</h3>
				</a>
				<p><code>deltas</code> is an array of numbers, each representing the contribution of a single character in a <code>rhythm</code> string.</p>
				<ul>
					<li><code>[0.25, 0.25, 0.25 0.25]</code> is an <code>deltas</code> array derived from <code>&#39;h h &#39;</code></li>
				</ul>
				<a href="#totals" id="totals" style="color: inherit; text-decoration: none;">
					<h3>Totals</h3>
				</a>
				<p><code>totals</code> is an array of durations elapsed at the end of each segment</p>
				<ul>
					<li><code>[.25, .5,  .75, 1]</code> is a sequence of quarter notes derived from <code>&#39;h h &#39;</code></li>
				</ul>
				<a href="#rhythm-object" id="rhythm-object" style="color: inherit; text-decoration: none;">
					<h3>Rhythm Object</h3>
				</a>
				<p><code>parseRhythm(rhythm)</code> returns a rhythm object for a given <code>rhythm</code> string. A rhythm object has <code>.deltas</code> and <code>.totals</code> members.</p>
				<pre><code class="language-javascript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">rObj</span><span style="color: #000000"> = </span><span style="color: #795E26">parseRhythm</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;h h &#039;</span><span style="color: #000000">);</span>
<span style="color: #001080">rObj</span><span style="color: #000000">.</span><span style="color: #001080">should</span><span style="color: #000000">.</span><span style="color: #795E26">deepEqual</span><span style="color: #000000">({</span>
<span style="color: #000000">  </span><span style="color: #001080">deltas:</span><span style="color: #000000"> [</span><span style="color: #098658">.25</span><span style="color: #000000">, </span><span style="color: #098658">.25</span><span style="color: #000000">, </span><span style="color: #098658">.25</span><span style="color: #000000">, </span><span style="color: #098658">.25</span><span style="color: #000000">],</span>
<span style="color: #000000">  </span><span style="color: #001080">totals:</span><span style="color: #000000"> [</span><span style="color: #098658">.25</span><span style="color: #000000">, </span><span style="color: #098658">.50</span><span style="color: #000000">, </span><span style="color: #098658">.75</span><span style="color: #000000">, </span><span style="color: #098658">1.0</span><span style="color: #000000">],</span>
<span style="color: #000000">});</span>
</code></pre>
				<a href="#rhythmic-data-type-equivalency" id="rhythmic-data-type-equivalency" style="color: inherit; text-decoration: none;">
					<h3>Rhythmic Data Type Equivalency</h3>
				</a>
				<p>The following are all equivalent:</p>
				<ul>
					<li>A <code>&#39;h h &#39;</code> rhythm</li>
					<li>A <code>[.50, .00, .50, .00]</code> advances array</li>
					<li>A <code>[.25, .25, .25, .25]</code> deltas array</li>
					<li>A <code>[.25, .50, .75, 1.0]</code> totals array</li>
				</ul>
				<a href="#durations-measured-in-whole-notes" id="durations-measured-in-whole-notes" style="color: inherit; text-decoration: none;">
					<h3>Durations measured in Whole Notes</h3>
				</a>
				<p>Where possible, I measure durations in whole notes. This means that an eighth note is <code>1/8</code> === <code>0.125</code>, which I find easier than measuring in quarter notes or seconds.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="modules.html">Exports</a>
					</li>
					<li class=" tsd-kind-namespace">
						<a href="modules/converters.html">converters</a>
					</li>
					<li class=" tsd-kind-namespace">
						<a href="modules/cybr.html">cybr</a>
					</li>
					<li class=" tsd-kind-namespace">
						<a href="modules/gen.html">gen</a>
					</li>
					<li class=" tsd-kind-namespace">
						<a href="modules/m.html">m</a>
					</li>
					<li class=" tsd-kind-namespace">
						<a href="modules/plugins.html">plugins</a>
					</li>
					<li class=" tsd-kind-namespace">
						<a href="modules/random.html">random</a>
					</li>
					<li class=" tsd-kind-namespace">
						<a href="modules/tlibrary.html">t<wbr>Library</a>
					</li>
					<li class=" tsd-kind-namespace">
						<a href="modules/tab.html">tab</a>
					</li>
					<li class=" tsd-kind-namespace">
						<a href="modules/techniques.html">techniques</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-reference">
						<a href="modules.html#client" class="tsd-kind-icon">Client</a>
					</li>
					<li class=" tsd-kind-reference">
						<a href="modules.html#ipcclient" class="tsd-kind-icon">Ipc<wbr>Client</a>
					</li>
					<li class=" tsd-kind-enum">
						<a href="enums/audiofilemode.html" class="tsd-kind-icon">Audio<wbr>File<wbr>Mode</a>
					</li>
					<li class=" tsd-kind-enum">
						<a href="enums/plugintype.html" class="tsd-kind-icon">Plugin<wbr>Type</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/fluidaudiofile.html" class="tsd-kind-icon">Fluid<wbr>Audio<wbr>File</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/fluidplugin.html" class="tsd-kind-icon">Fluid<wbr>Plugin</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/fluidsession.html" class="tsd-kind-icon">Fluid<wbr>Session</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/fluidtrack.html" class="tsd-kind-icon">Fluid<wbr>Track</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/audiofileoptions.html" class="tsd-kind-icon">Audio<wbr>File<wbr>Options</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/usecontext.html" class="tsd-kind-icon">Use<wbr>Context</a>
					</li>
					<li class=" tsd-kind-variable">
						<a href="modules.html#udpclient" class="tsd-kind-icon">Udp<wbr>Client</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="modules.html#sessiontocontentfluidmessage" class="tsd-kind-icon">session<wbr>ToContent<wbr>Fluid<wbr>Message</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="modules.html#sessiontoreaperproject" class="tsd-kind-icon">session<wbr>ToReaper<wbr>Project</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="modules.html#sessiontotemplatefluidmessage" class="tsd-kind-icon">session<wbr>ToTemplate<wbr>Fluid<wbr>Message</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer>
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>